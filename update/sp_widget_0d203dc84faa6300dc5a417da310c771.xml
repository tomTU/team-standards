<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function( $scope ) {
	
  var c = this;
	
	console.log($scope);
	
	c.loading = true;
	c.updateSetName = c.data.updateSetName;
	
	c.server.get({
		'action': 'loadForm',
		'sys_id': c.data.sys_id,
		'table': c.data.table
	}).then(function( response ) {
		c.formWidget = response.data.formWidget
		c.loading = false;
	});
	
}]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>teamstandards-record-view</id>
        <internal>false</internal>
        <link/>
        <name>TeamStandards Record View</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {

	data.sys_id = input.sys_id;
	data.table = input.table;

	if ( input && input.action == 'loadForm') {
		var formOptions = {
			'sys_id': data.sys_id,
			'table': data.table,
			'hideRelatedLists': true
		};
		data.formWidget = $sp.getWidget( "widget-form", formOptions );
	} else {
		// Get current users update set
		data.updateSetName = "";

		var grUpdSet = new GlideRecord( 'sys_update_set' );
		if ( grUpdSet.get( gs.getUser().getPreference( 'sys_update_set' ) ) ) {
			data.updateSetName = grUpdSet.getDisplayValue();
		}
	}


})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin_tc</sys_created_by>
        <sys_created_on>2018-12-18 09:23:04</sys_created_on>
        <sys_id>0d203dc84faa6300dc5a417da310c771</sys_id>
        <sys_mod_count>55</sys_mod_count>
        <sys_name>TeamStandards Record View</sys_name>
        <sys_package display_value="TeamStandards" source="x_38339_teamstand">26a1f9a24f562300dc5a417da310c7f6</sys_package>
        <sys_policy/>
        <sys_scope display_value="TeamStandards">26a1f9a24f562300dc5a417da310c7f6</sys_scope>
        <sys_update_name>sp_widget_0d203dc84faa6300dc5a417da310c771</sys_update_name>
        <sys_updated_by>admin_tc</sys_updated_by>
        <sys_updated_on>2018-12-18 16:43:30</sys_updated_on>
        <template><![CDATA[<div>

  <p class="alert alert-info"
     ng-if="c.updateSetName"
     ng-class="{'alert-danger': c.updateSetName == 'Default'}">
    ${You are currently in Update Set}: '{{c.updateSetName}}'
  </p>

  <div style="text-align: center; margin-top: 40px;"
       ng-if="c.loading">
    <img src="/teamstandard-spinner.gif"/>
  </div>

  <div ng-if="!c.loading">
    <p ng-if="!c.formWidget">${Error - No Form found}</p>
    <sp-widget widget="c.formWidget"></sp-widget>
  </div>

</div>]]></template>
    </sp_widget>
</record_update>
